{% extends 'base.html' %}
{% load i18n %}

{% block page_title %} {% trans "Validate Point" %} {% endblock %}

{% block content %}
  <h2>Validate Point</h2>

  <div class="row">
    <div class="col-lg-8">
       <div id="map" style="width: 850px; height: 550px;"></div>
    </div>

    <div class="col-lg-4">
    </div>
  </div>
{% endblock %}

{% block js_scripts %}

      <!-- Google Map -->
      <script>
        function placeMarkerAndPanTo(latLng, map) {
          var marker = new google.maps.Marker({
            position: latLng,
            map: map
          });

          map.panTo(latLng);
        }

        // initialize the map
        function initMap() {
          var map = new google.maps.Map(document.getElementById('map'), {
              center: {lat: 37.770767, lng: -122.424877}, // San Franscisco
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              zoom: 15,
              draggable: true,
              mapTypeControl: false,
              panControl: false,
              streetViewControl: false,
              zoomControl: true,
              zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL
              }
          });

          map.addListener('click', function(e) {
            console.log("LAT: " + e.latLng.lat() + " LNG: " + e.latLng.lng());
            placeMarkerAndPanTo(e.latLng, map);
          });
      }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_MAPS_API_KEY }}&libraries=drawing&callback=initMap"></script>
{% endblock %}